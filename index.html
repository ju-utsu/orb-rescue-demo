<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>VR Orb Collector</title>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<style>
  body, html { margin: 0; padding: 0; overflow: hidden; font-family: Arial, sans-serif; }
  #hud {
    position: fixed; top: 20px; left: 20px; color: white;
    font-size: 24px; font-weight: bold; text-shadow: 1px 1px 4px #000;
  }
  #pauseBtn {
    position: fixed; bottom: 20px; right: 20px;
    background: rgba(255,255,255,0.8); color: black;
    border: none; border-radius: 50%; width: 60px; height: 60px;
    font-size: 24px; font-weight: bold; cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  }
  #menuOverlay {
    display: none; position: fixed; top: 0; left: 0;
    width: 100%; height: 100%; background: rgba(0,0,0,0.8);
    color: white; text-align: center; padding-top: 150px;
    font-size: 30px; z-index: 1000;
  }
  .menu-btn {
    margin-top: 30px; padding: 15px 30px; font-size: 24px;
    background: #fff; color: #000; border-radius: 10px; cursor: pointer;
  }
</style>
</head>
<body>
<div id="hud">Score: 0</div>
<button id="pauseBtn">â˜°</button>
<div id="menuOverlay">
  <div>Game Paused</div>
  <button class="menu-btn" onclick="resumeGame()">Resume</button>
  <button class="menu-btn" onclick="restartGame()">Restart</button>
</div>

<a-scene>
  <!-- Sky and Grid -->
  <a-sky color="#0f0f0f"></a-sky>
  <a-entity geometry="primitive: plane; width: 100; height: 100"
            rotation="-90 0 0" material="color: #111; shader: flat; repeat: 50 50"
            position="0 0 0"></a-entity>

  <!-- Camera + Cursor -->
  <a-entity camera look-controls wasd-controls position="0 1.6 0">
    <a-entity cursor="fuse: true; fuseTimeout: 1500"
              position="0 0 -1"
              geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
              material="color: white; shader: flat"></a-entity>
  </a-entity>
</a-scene>

<!-- Sounds -->
<audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2023/04/12/audio_a9e53529e3.mp3?filename=futuristic-background-145311.mp3" loop></audio>
<audio id="collectSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_309c030a7e.mp3?filename=collect-coin-2-18698.mp3"></audio>
<audio id="gameOverSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_8b7a2df0e5.mp3?filename=game-over-arcade-6435.mp3"></audio>

<script>
let score = 0, multiplier = 1;
let spawnInterval, powerUpActive = false;
let gamePaused = false;
const hud = document.getElementById('hud');
const bgMusic = document.getElementById('bgMusic');
const collectSound = document.getElementById('collectSound');
const gameOverSound = document.getElementById('gameOverSound');

document.getElementById('pauseBtn').onclick = () => {
  gamePaused = true;
  document.getElementById('menuOverlay').style.display = 'block';
};

function resumeGame() {
  gamePaused = false;
  document.getElementById('menuOverlay').style.display = 'none';
}
function restartGame() {
  location.reload();
}

// Start music on first interaction
document.body.addEventListener('click', () => bgMusic.play(), { once: true });

function updateScore(points) {
  score += points * multiplier;
  hud.innerText = `Score: ${score}`;
}

function spawnObjects() {
  if (gamePaused) return;
  const scene = document.querySelector('a-scene');
  const orb = document.createElement('a-sphere');
  orb.setAttribute('radius', '0.3');
  orb.setAttribute('color', '#39ff14');
  orb.setAttribute('position', randomPosition());
  orb.setAttribute('class', 'collectible');
  orb.setAttribute('event-set__click', '_event: click; visible: false;');
  orb.addEventListener('click', () => {
    collectSound.play();
    orb.remove();
    updateScore(10);
  });
  scene.appendChild(orb);

  // 1 in 5 chance for a danger object
  if (Math.random() < 0.2) {
    const danger = document.createElement('a-box');
    danger.setAttribute('color', '#ff3131');
    danger.setAttribute('depth', '0.5');
    danger.setAttribute('height', '0.5');
    danger.setAttribute('width', '0.5');
    danger.setAttribute('position', randomPosition());
    danger.addEventListener('click', () => gameOver());
    scene.appendChild(danger);
  }

  // 1 in 7 chance for a power-up
  if (Math.random() < 0.14) {
    const power = document.createElement('a-octahedron');
    power.setAttribute('color', '#00e6e6');
    power.setAttribute('radius', '0.4');
    power.setAttribute('position', randomPosition());
    power.addEventListener('click', () => activatePowerUp(power));
    scene.appendChild(power);
  }
}

function randomPosition() {
  const x = (Math.random() - 0.5) * 20;
  const y = 1 + Math.random() * 2;
  const z = -3 - Math.random() * 10;
  return `${x} ${y} ${z}`;
}

function gameOver() {
  gamePaused = true;
  bgMusic.pause();
  gameOverSound.play();
  document.getElementById('menuOverlay').style.display = 'block';
  document.querySelector('#menuOverlay div').innerText = 'Game Over';
}

function activatePowerUp(el) {
  el.remove();
  if (powerUpActive) return;
  powerUpActive = true;
  multiplier = 2;
  setTimeout(() => {
    multiplier = 1;
    powerUpActive = false;
  }, 10000);
}

// Spawn every 2.5 seconds
spawnInterval = setInterval(spawnObjects, 2500);
</script>
</body>
</html>

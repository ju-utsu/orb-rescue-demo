<!DOCTYPE html>
<html>
<head>
  <title>VR Neon Orb Collector</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
  <style>
    body { margin: 0; font-family: 'Orbitron', sans-serif; }
    /* Neon Menu */
    #menu {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: radial-gradient(circle at center, #0d0d0d, #000);
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      color: #0ff;
      text-align: center;
    }
    #menu h1 {
      font-size: 3em;
      color: #0ff;
      text-shadow: 0 0 20px #0ff;
      margin-bottom: 20px;
    }
    .setting {
      margin: 10px 0;
      font-size: 1.2em;
    }
    input, select {
      background: #000;
      border: 2px solid #0ff;
      color: #0ff;
      padding: 8px;
      font-size: 1em;
      width: 180px;
      text-align: center;
    }
    #start-btn {
      margin-top: 20px;
      padding: 15px 40px;
      font-size: 1.5em;
      color: #0ff;
      background: transparent;
      border: 3px solid #0ff;
      cursor: pointer;
      text-shadow: 0 0 10px #0ff;
      box-shadow: 0 0 20px #0ff;
      transition: 0.3s;
    }
    #start-btn:hover {
      background: #0ff;
      color: #000;
      text-shadow: none;
    }
    /* Score */
    #scoreUI {
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 24px;
      color: #0ff;
      text-shadow: 0 0 10px #0ff;
      display: none;
    }
    #gameOver {
      display: none;
      position: fixed;
      width: 100%; height: 100%;
      top: 0; left: 0;
      background: rgba(0,0,0,0.9);
      color: #fff;
      text-align: center;
      justify-content: center; align-items: center;
      flex-direction: column;
      font-size: 2em;
    }
    #restart-btn {
      margin-top: 20px;
      padding: 15px 30px;
      font-size: 1.2em;
      color: #0ff;
      background: transparent;
      border: 2px solid #0ff;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- Neon Menu -->
  <div id="menu">
    <h1>VR Neon Orb Collector</h1>
    <div class="setting">
      <label>Number of Orbs:</label><br>
      <input type="number" id="orbCount" value="10" min="1" max="50">
    </div>
    <div class="setting">
      <label>Number of Dangers:</label><br>
      <input type="number" id="dangerCount" value="5" min="0" max="30">
    </div>
    <div class="setting">
      <label>Gaze Time (ms):</label><br>
      <input type="number" id="gazeTime" value="1500" min="500" max="5000">
    </div>
    <div class="setting">
      <label>Background Style:</label><br>
      <select id="bgStyle">
        <option value="grid">Neon Grid</option>
        <option value="dark">Dark Space</option>
      </select>
    </div>
    <div class="setting">
      <label>Music:</label><br>
      <select id="musicToggle">
        <option value="on">On</option>
        <option value="off">Off</option>
      </select>
    </div>
    <button id="start-btn">START GAME</button>
  </div>

  <!-- Score -->
  <div id="scoreUI">Score: 0</div>

  <!-- Game Over -->
  <div id="gameOver">
    <div>Game Over!</div>
    <button id="restart-btn">Restart</button>
  </div>

  <!-- VR Scene -->
  <a-scene embedded vr-mode-ui="enabled: true" id="vrScene" style="display:none;">
    <a-entity id="cameraRig" position="0 1.6 0">
      <a-camera look-controls wasd-controls>
        <a-cursor
          id="cursor"
          fuse="true"
          fuse-timeout="1500"
          material="color: #0ff; shader: flat"
          geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03">
        </a-cursor>
      </a-camera>
    </a-entity>
    <!-- Dynamic Environment -->
    <a-entity id="environment"></a-entity>
  </a-scene>

  <script>
    const startBtn = document.getElementById('start-btn');
    const menu = document.getElementById('menu');
    const vrScene = document.getElementById('vrScene');
    const scoreUI = document.getElementById('scoreUI');
    const gameOverUI = document.getElementById('gameOver');
    const restartBtn = document.getElementById('restart-btn');

    let score = 0;
    let totalOrbs = 0;
    let orbsCollected = 0;

    startBtn.addEventListener('click', () => {
      const orbCount = parseInt(document.getElementById('orbCount').value);
      const dangerCount = parseInt(document.getElementById('dangerCount').value);
      const gazeTime = parseInt(document.getElementById('gazeTime').value);
      const bgStyle = document.getElementById('bgStyle').value;
      const music = document.getElementById('musicToggle').value;

      menu.style.display = 'none';
      vrScene.style.display = 'block';
      scoreUI.style.display = 'block';

      document.querySelector('#cursor').setAttribute('fuse-timeout', gazeTime);
      setupEnvironment(bgStyle);
      spawnObjects(orbCount, dangerCount);
      totalOrbs = orbCount;
    });

    function setupEnvironment(style) {
      const env = document.getElementById('environment');
      if (style === 'grid') {
        env.innerHTML = `<a-plane rotation="-90 0 0" width="50" height="50" color="#111" 
                           material="shader: flat; repeat: 50 50; src: https://cdn.aframe.io/a-painter/images/floor.jpg"></a-plane>`;
      } else {
        env.innerHTML = `<a-sky color="#000"></a-sky>`;
      }
    }

    function spawnObjects(orbs, dangers) {
      for (let i = 0; i < orbs; i++) {
        const x = (Math.random() - 0.5) * 20;
        const z = (Math.random() - 0.5) * 20;
        const orb = document.createElement('a-sphere');
        orb.setAttribute('position', `${x} 1.5 ${z}`);
        orb.setAttribute('radius', '0.3');
        orb.setAttribute('color', '#0ff');
        orb.classList.add('orb');
        orb.setAttribute('cursor-listener', '');
        document.querySelector('a-scene').appendChild(orb);
      }
      for (let i = 0; i < dangers; i++) {
        const x = (Math.random() - 0.5) * 20;
        const z = (Math.random() - 0.5) * 20;
        const danger = document.createElement('a-box');
        danger.setAttribute('position', `${x} 1.5 ${z}`);
        danger.setAttribute('color', 'red');
        danger.classList.add('danger');
        danger.setAttribute('cursor-listener', '');
        document.querySelector('a-scene').appendChild(danger);
      }
    }

    AFRAME.registerComponent('cursor-listener', {
      init: function () {
        this.el.addEventListener('click', (e) => {
          if (this.el.classList.contains('orb')) {
            this.el.parentNode.removeChild(this.el);
            score += 10;
            orbsCollected++;
            document.getElementById('scoreUI').innerText = 'Score: ' + score;
            if (orbsCollected === totalOrbs) {
              endGame();
            }
          } else if (this.el.classList.contains('danger')) {
            endGame();
          }
        });
      }
    });

    function endGame() {
      vrScene.style.display = 'none';
      scoreUI.style.display = 'none';
      gameOverUI.style.display = 'flex';
    }

    restartBtn.addEventListener('click', () => {
      location.reload();
    });
  </script>
</body>
    </html>

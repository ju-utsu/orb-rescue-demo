<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Orb Collector</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
      }
      #scoreboard {
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 28px;
        color: white;
        font-weight: bold;
        text-shadow: 2px 2px 5px black;
        z-index: 10;
      }
    </style>
  </head>
  <body>
    <div id="scoreboard">Score: 0</div>

    <a-scene>
      <!-- Sky & Ground -->
      <a-sky color="#87CEEB"></a-sky>
      <a-plane color="#228B22" rotation="-90 0 0" width="30" height="30"></a-plane>

      <!-- Camera with Cursor for Gaze Detection -->
      <a-entity camera look-controls>
        <a-cursor 
          color="white" 
          fuse="true" 
          fuse-timeout="150"
          raycaster="objects: .clickable">
        </a-cursor>
      </a-entity>

      <!-- Orb Container -->
      <a-entity id="orb-container"></a-entity>

      <!-- Sound -->
      <a-asset>
        <audio id="collectSound" src="sounds/collect.mp3"></audio>
      </a-asset>
    </a-scene>

    <script>
      let score = 0;
      const scoreboard = document.getElementById('scoreboard');
      const orbContainer = document.getElementById('orb-container');

      // Function to spawn a random orb
      function spawnOrb() {
        const orb = document.createElement('a-sphere');
        orb.setAttribute('radius', '0.3');
        orb.setAttribute('color', 'yellow');
        orb.setAttribute('class', 'clickable');

        // Random position within a range
        const x = (Math.random() * 10) - 5;
        const y = 1 + Math.random() * 2;
        const z = (Math.random() * -8) - 2;
        orb.setAttribute('position', `${x} ${y} ${z}`);

        orb.addEventListener('click', () => {
          collectOrb(orb);
        });

        orbContainer.appendChild(orb);
      }

      // Collect orb
      function collectOrb(orb) {
        score += 10;
        scoreboard.innerText = `Score: ${score}`;
        orb.parentNode.removeChild(orb);

        // Play sound
        const sound = document.getElementById('collectSound');
        sound.play();

        // Spawn a new orb
        spawnOrb();
      }

      // Initial orbs
      for (let i = 0; i < 5; i++) {
        spawnOrb();
      }
    </script>
  </body>
</html>

<html>
  <head>
    <title>VR Orb Collector</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <style>
      #startButton {
        position: absolute;
        top: 40%;
        left: 40%;
        z-index: 999;
        font-size: 20px;
        padding: 10px 20px;
      }
      #score {
        position: absolute;
        top: 10px;
        left: 10px;
        color: white;
        font-size: 20px;
        font-family: sans-serif;
        z-index: 999;
      }
    </style>
  </head>
  <body>
    <button id="startButton">Start Demo</button>
    <div id="score">Score: 0</div>

    <a-scene>
      <a-sky color="#222"></a-sky>

      <!-- Orbs -->
      <a-entity id="orb1" geometry="primitive: sphere; radius: 0.3"
                material="color: orange"
                position="0 1.6 -3"
                class="clickable"></a-entity>

      <a-entity id="orb2" geometry="primitive: sphere; radius: 0.3"
                material="color: blue"
                position="2 1.6 -4"
                class="clickable"></a-entity>

      <a-entity id="orb3" geometry="primitive: sphere; radius: 0.3"
                material="color: green"
                position="-2 1.6 -4"
                class="clickable"></a-entity>

      <!-- Player camera with gaze cursor -->
      <a-entity camera look-controls>
        <a-entity cursor="fuse: true; fuseTimeout: 1000"
                  position="0 0 -1"
                  geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                  material="color: white; shader: flat"></a-entity>
      </a-entity>
    </a-scene>

    <script>
      let audioCtx, collectSound;
      let score = 0;
      const scoreEl = document.getElementById('score');

      // Start button handler
      document.getElementById('startButton').addEventListener('click', () => {
        document.getElementById('startButton').style.display = 'none';

        // Unlock audio
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        // Prepare a short "ding" sound
        collectSound = () => {
          const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();
          osc.type = 'sine';
          osc.frequency.value = 880;
          gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
          osc.connect(gain).connect(audioCtx.destination);
          osc.start();
          osc.stop(audioCtx.currentTime + 0.15);
        };
      });

      // Orb click handler
      document.querySelectorAll('.clickable').forEach(orb => {
        orb.addEventListener('click', () => {
          if (collectSound) collectSound();
          score++;
          scoreEl.innerText = `Score: ${score}`;
          orb.parentNode.removeChild(orb);
        });
      });
    </script>
  </body>
</html>
